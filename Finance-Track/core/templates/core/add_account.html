{% extends 'core/base.html' %}

{% block title %}{% if is_edit %}Edit Account{% else %}Add Account{% endif %} - Finance Tracker{% endblock %}

{% block content %}
<h2>{% if is_edit %}Edit Account{% else %}Add Account{% endif %}</h2>

{% if is_edit and account %}
<div style="background: #d1ecf1; border: 1px solid #bee5eb; border-radius: 0.25rem; padding: 1rem; margin-bottom: 1.5rem;">
    <p style="margin: 0; color: #0c5460;">
        <strong>Editing:</strong> {{ account.name }} ({{ account.get_account_type_display }})
        <br><small>Current Balance: {{ account.current_balance|floatformat:2 }} {{ account.currency.code }} (read-only)</small>
    </p>
</div>
{% endif %}

<form method="post">
    {% csrf_token %}
    
    <div class="row">
        <div class="col">
            <label for="{{ form.name.id_for_label }}">Account Name:</label>
            {{ form.name }}
        </div>
        
        <div class="col">
            <label for="{{ form.account_type.id_for_label }}">Account Type:</label>
            {{ form.account_type }}
        </div>
    </div>
    
    <div class="row">
        <div class="col">
            <label for="{{ form.currency.id_for_label }}">Currency:</label>
            {{ form.currency }}
        </div>
        
        <div class="col">
            <label for="{{ form.opening_balance.id_for_label }}">Opening Balance:</label>
            {{ form.opening_balance }}
            <small style="display: block; color: #6c757d; margin-top: 0.25rem;">
                {{ form.opening_balance.help_text }}
            </small>
        </div>
    </div>
    
    <div>
        <label for="{{ form.description.id_for_label }}">Description (Optional):</label>
        {{ form.description }}
    </div>
    
    <div>
        <button type="submit" class="btn btn-primary">
            {% if is_edit %}Update Account{% else %}Add Account{% endif %}
        </button>
        <a href="{% url 'accounts_list' %}" class="btn">Cancel</a>
    </div>
</form>
{% endblock %}
